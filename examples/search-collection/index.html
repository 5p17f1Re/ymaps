<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Примеры. Поиск по локальной коллекции геообъектов с помощью SearchControl.</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <!-- Класс провайдера для стандартного ymaps.SearchControl -->
    <script src="collection-search-provider.js" type="text/javascript"></script>

    <!-- Тестовые данные. Нужно заменить на свои. -->
    <script src="data.js" type="text/javascript"></script>

    <!-- Сделаем броузеры ES5 friendly -->
    <script src="/es5-shim/es5-shim.js" type="text/javascript"></script>

    <script src="//api-maps.yandex.ru/2.0/?load=package.standard,package.geoObjects&lang=ru-RU" type="text/javascript"></script>

    <script type="text/javascript">
        ymaps.ready(init);

        function init() {
            var map = new ymaps.Map("map", {
                center: [55.755768, 37.617671],
                zoom: 10,
                behaviors: ["default", "scrollZoom"]
            });

            // Создаем коллекцию для точек из data.js
            var collection = new ymaps.GeoObjectCollection();

            // Добавляем коллекцию на карту.
            map.geoObjects.add(collection);

            // Массив points определен в файле data.js
            // Заполняем коллекцию тестовыми данными.
            points.forEach(function (point) {
                collection.add(new ymaps.Placemark(point.coords, { balloonContentBody : point.label }));
            });

            // Создаем экземпляр класса ymaps.control.SearchControl
            // и подменяем ему стандартный провайдер данных - геокодер,
            // на экземпляр класса SearchCollectionProvider (из файла search-collection-provider.js)
            var search = new ymaps.control.SearchControl({
                provider : new SearchCollectionProvider(collection),
                noPlacemark : true
            });

            // Добавляем контрол в верхний правый угол.
            map.controls.add(search, { right : 10, top : 10 });
        }

    </script>

</head>

<body>
    <div id="map" style="width: 800px; height: 400px"></div>
</body>

</html>
