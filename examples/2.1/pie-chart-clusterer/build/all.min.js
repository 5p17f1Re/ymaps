ymaps.modules.define("PieChartClusterer",["Clusterer","util.defineClass","util.extend","PieChartClusterer.icon.params","PieChartClusterer.component.Canvas"],function(e,s,t,n,r,a){var c=/#(.*)Icon/,i=function(e){return e.match(c)[1]},o=t(function(e){o.superclass.constructor.call(this,n({clisterIcons:""},e)),this._canvas=new a(r.icons.large.size),this._canvas.options.setParent(this.options)},s,{createCluster:function(e,s){var t=o.superclass.createCluster.call(this,e,s),a=s.reduce(function(e,s){var t=i(s.options.get("preset","islands#blueIcon"));return e[t]=++e[t]||1,e},{}),c=this._canvas.generateIconDataURL(a,s.length),u={clusterIcons:[n({href:c},r.icons.small),n({href:c},r.icons.medium),n({href:c},r.icons.large)],clusterNumbers:r.numbers};return t.options.set(u),t}});e(o)});
ymaps.modules.define("RandomPointsGenerator",[],function(t){function n(t){this.count=t||0}n.generate=function(t){return new n(t)},n.prototype.generate=function(t){return this.count=t,this},n.prototype.atBounds=function(t){for(var n=[t[1][0]-t[0][0],t[1][1]-t[0][1]],o=[],e=0;e<this.count;e++)o[e]=this.createMarker([Math.random()*n[0]+t[0][0],Math.random()*n[1]+t[0][1]],e);return o},n.prototype.atCenterAndRadius=function(t,n){for(var o,e,r,a=ymaps.coordSystem.geo,i=[],u=0;u<this.count;u++)e=[Math.random()-Math.random(),Math.random()-Math.random()],o=n*Math.random(),r=a.solveDirectProblem(t,e,o).endPoint,i[u]=this.createMarker(r,u);return i},n.prototype.atCenterAndSize=function(){},n.prototype.createMarker=function(t,n){return new ymaps.GeoObject({geometry:{type:"Point",coordinates:t},properties:this.getPointData(n)},this.getPointOptions(n))},n.prototype.getPointData=function(){return{}},n.prototype.getPointOptions=function(){return{}},t(n)});
ymaps.modules.define("PieChartClusterer.component.Canvas",["option.Manager","PieChartClusterer.icon.colors"],function(t,o,i){var e={iconStrokeStyle:"white",iconLineWidth:2,iconCoreRadius:23,iconCoreFillStyle:"white"},n=function(t){this._canvas=document.createElement("canvas"),this._canvas.width=t[0],this._canvas.height=t[1],this._context=this._canvas.getContext("2d"),this.options=new o({})};n.prototype.generateIconDataURL=function(t,o){return this._drawIcon(t,o),this._canvas.toDataURL()},n.prototype._drawIcon=function(t,o){var i=0,n=360,r=this._context,a=this._canvas.width/2,s=this._canvas.height/2,c=this.options.get("iconLineWidth",e.iconLineWidth),h=this.options.get("iconStrokeStyle",e.iconStrokeStyle),l=Math.floor((a+s-c)/2);r.strokeStyle=h,r.lineWidth=c,Object.keys(t).forEach(function(e){var c=t[e];n=i+360*c/o,r.fillStyle=this._getStyleColor(e),o>c?i=this._drawSector(a,s,l,i,n):this._drawCircle(a,s,l)},this),this._drawCore(a,s)},n.prototype._drawCore=function(t,o){var i=this._context,n=this.options.get("iconCoreFillStyle",e.iconCoreFillStyle),r=this.options.get("iconCoreRadius",e.iconCoreRadius);i.fillStyle=n,this._drawCircle(t,o,r)},n.prototype._drawCircle=function(t,o,i){var e=this._context;e.beginPath(),e.arc(t,o,i,0,2*Math.PI),e.fill(),e.stroke()},n.prototype._drawSector=function(t,o,i,e,n){var r=this._context;return r.beginPath(),r.moveTo(t,o),r.arc(t,o,i,this._toRadians(e),this._toRadians(n)),r.lineTo(t,o),r.closePath(),r.fill(),r.stroke(),n},n.prototype._toRadians=function(t){return t*Math.PI/180},n.prototype._getStyleColor=function(t){return i[t]},t(n)});
ymaps.modules.define("PieChartClusterer.icon.colors",[],function(e){var r={blue:"#1E98FF",red:"#ED4543",darkOrange:"#E6761B",night:"#0E4779",darkBlue:"#177BC9",pink:"#F371D1",gray:"#B3B3B3",brown:"#793D0E",darkGreen:"#1BAD03",violet:"#B51EFF",black:"#595959",yellow:"#FFD21E",green:"#56DB40",orange:"#FF931E",lightBlue:"#82CDFF",olive:"#97A100"};e(r)});
ymaps.modules.define("PieChartClusterer.icon.params",["shape.Circle","geometry.pixel.Circle"],function(e,s,i){e({icons:{small:{size:[46,46],offset:[-23,-23],shape:new s(new i([0,2],21.5))},medium:{size:[58,58],offset:[-29,-29],shape:new s(new i([0,2],27.5))},large:{size:[71,71],offset:[-35.5,-35.5],shape:new s(new i([0,2],34))}},numbers:[10,100]})});
